@{
    ViewBag.Title = "Envio de e-mails";
    var qtdEmails = ViewBag.CountEmails ?? 0;
}

@section scripts
{
    <script type="text/javascript" src="~/Scripts/Mail.js"></script>
}

<div class="row">
    <div class="col-md-12 text-center">
        <h2>Envio de e-mails</h2>
        <h3>@qtdEmails email(s) carregado(s)</h3>
        <hr class="star-primary">
    </div>
</div>

<div class="row" id="divForm">
    <form name="sentMessage" id="formSentMessage">
        <div class="row control-group">
            <div class="form-group col-md-12 floating-label-form-group controls">
                <label>Nome do remetente</label>
                <input type="text" class="form-control" placeholder="Nome" id="name" required>
            </div>
        </div>
        <div class="row control-group">
            <div class="form-group col-md-12 floating-label-form-group controls">
                <label>E-mail do remetente</label>
                <input type="email" class="form-control" placeholder="Email" id="email" required>
            </div>
        </div>
        <div class="row control-group">
            <div class="form-group col-md-12 floating-label-form-group controls">
                <label>Senha do e-mail do remetente</label>
                <input type="password" class="form-control" placeholder="Senha" id="password" required>
            </div>
        </div>
        <div class="row control-group">
            <div class="form-group col-md-12 floating-label-form-group controls">
                <label class="control-label">Assunto do e-mail</label>
                <input type="text" class="form-control" placeholder="Assunto" id="emailSubject" required>
            </div>
        </div>
        <div class="row control-group">
            <div class="form-group col-md-12 floating-label-form-group controls">
                <label>Email</label>
                <div id="summernote"></div>
            </div>
        </div>
        <input type="hidden" id="hiddenEmails" value="@ViewBag.Emails" />
        <br>
        <div class="row">
            <div class="form-group col-md-12">
                <button id="btnSend" type="submit" class="btn btn-success btn-lg">Enviar</button>
            </div>
        </div>
    </form>
</div>

<div class="row" id="divResult" style="display:none">
    <div class="row control-group">
        <div class="form-group col-md-12 floating-label-form-group controls">
            <div id="divResultProcessing">
                Enviando... <span id="processingItem">1</span>/@qtdEmails...
                <img src="~/Images/ajax-loader.gif" />
                <button id="btnStop" type="submit" class="btn btn-default btn-lg">Interromper</button>
            </div>
            <div id="divResultStop" class="bg-danger" style="display:none">
                Processamento interrompido!
            </div>
            <div id="divResultSuccess" class="bg-success" style="display:none">
                Processamento concluído!
            </div>
        </div>
    </div>

    <div class="row control-group">
        <div class="form-group col-md-12 floating-label-form-group controls">
            <table class="table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Nome</th>
                        <th>Email</th>
                        <th>Mensagem</th>
                    </tr>
                </thead>
                <tbody id="tableItems">

                </tbody>
            </table>
        </div>
    </div>
</div>